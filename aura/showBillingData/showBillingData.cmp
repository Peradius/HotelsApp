<aura:component controller="ShowBillingDataController">
	<aura:attribute name="reservation" type="Reservation__c" />
	<aura:attribute name="reservations" type="Reservation__c[]" />
	<aura:attribute name="billings" type="Billing__c[]" />
	<aura:attribute name="reservationTotalBilling" type="Decimal" />
	<aura:attribute name="showTotalCost" type="Boolean" default="false" />

	<aura:registerEvent name="billingTraverseEvent" type="c:billingTraverseEvent" />

	<div class="slds-m-around_medium">
		<div class="slds-grid">
			<div class="slds-col slds-box slds-grid slds-theme_shade">
										<!-- RESERVATIONS -->
				<div class="slds-col slds-box slds-size--1-of-3 slds-theme_shade">
					<p class="slds-text-heading_large">
						Reservations
					</p>
					<hr />
					<aura:iteration items="{!v.reservations}" var="reservation">
						<div class="slds-grid">
																	<!-- IMAGE AND INFO -->
							<div class="slds-media slds-col slds-box">
								<div class="slds-media__figure slds-col slds-size_1-of-3">
									<lightning:formattedRichText value="{!reservation.Room__r.Photo__c}" />
								</div>

								<div class="slds-media__body slds-col slds-size_2-of-3">
									<p class="slds-text-heading_medium"> <lightning:formattedText value="{!'Room no. ' + reservation.Room__r.Name}" /> </p>
									<!-- <p class="slds-text-body_regular"> 
										Total bill:
									<lightning:formattedNumber value="{!}" currencyCode="EUR" minimumFractionDigits="2" maximumFractionDigits="2" style="currency" />
									</p> -->
									<p class="slds-text-body_regular"> <lightning:formattedText value="{! reservation.Check_In__c + ' - ' + reservation.Check_Out__c}" /> </p>
									<p><lightning:button label="Show finances" title="Show finances" onclick="{!c.showFinances}" value="{!reservation}" /></p>
								</div>
							</div>
																			<!-- /IMAGE AND INFO -->
						</div>
					</aura:iteration>
					<div class="slds-grid">
						<div class="slds-col">
							<p class="slds-align_absolute-center slds-p-around_medium" >
								<lightning:button label="Back" onclick="{!c.backClicked}" variant="brand" />
							</p>
						</div>
					</div>
				</div>
												<!-- /RESERVATIONS -->
												<!-- BILLINGS -->
				<div class="slds-col slds-box slds-size--2-of-3 slds-theme_shade">
					<p class="slds-text-heading_large">
						Billings
					</p>
					<hr />
					<div class="slds-grid">
						<div class="slds-media slds-col slds-box">
							<div class="slds-media__body slds-col slds-size_2-of-3">
								<p class="slds-text-heading_medium"> <lightning:formattedText value="Room reservation" /> </p>
								<p class="slds-text-body_regular"> <lightning:formattedDateTime value="{! v.reservation.Reservation_Date__c}" 
									year="numeric" month="numeric" day="numeric" hour="2-digit" minute="2-digit" timeZoneName="short" /> </p>
								<p class="slds-text-body_small">
									<lightning:formattedNumber value="{! v.reservation.Reservation_Cost__c}" 
									currencyCode="EUR" minimumFractionDigits="2" maximumFractionDigits="2" style="currency" />
								</p>
							</div>
						</div>
					</div>
					<aura:iteration items="{!v.billings}" var="billing">
						<div class="slds-grid">
							<div class="slds-media slds-col slds-box">
								<div class="slds-media__body slds-col slds-size_2-of-3">
									<p class="slds-text-heading_medium"> <lightning:formattedText value="{!billing.Name}" /> </p>
									<p class="slds-text-body_regular"> <lightning:formattedText value="{! billing.Service__r.Name}" /> </p>
									<p class="slds-text-body_small"> <lightning:formattedDateTime value="{! billing.Date__c}" hour12="false"
										year="numeric" month="numeric" day="numeric" hour="2-digit" minute="2-digit" timeZoneName="short" /> </p>
									<p class="slds-text-body_small"> <lightning:formattedNumber value="{! billing.Service__r.Price__c}" 
										currencyCode="EUR" minimumFractionDigits="2" maximumFractionDigits="2" style="currency" /> </p>
								</div>
							</div>
						</div>
					</aura:iteration>
												<!-- TOTAL COST -->
					<aura:if isTrue="{!v.showTotalCost}">
						<div class="slds-grid">
							<div class="slds-media slds-col">
								<div class="slds-media__body slds-col slds-text-heading_large">
									<p class="slds-align_absolute-center slds-p-around_medium" style="color:crimson">
										Total: 
										<lightning:formattedNumber value="{!v.reservationTotalBilling}" 
											currencyCode="EUR" minimumFractionDigits="2" maximumFractionDigits="2" style="currency" /> 
									</p>
								</div>
							</div>
						</div>
					</aura:if>
												<!-- /TOTAL COST -->
				</div>
												<!-- /BILLINGS -->
			</div>
		</div>
	</div>
</aura:component>